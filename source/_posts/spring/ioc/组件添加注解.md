---
title: 组件添加
tags:
  - java
  - spring
categories: spring
date: 2021-02-28 23:45:58
---

## 组件添加相关注解
### @Configuration
> 表示当前类是一个配置文件类
### @ComponentScan
> 配置包扫描(扫描@Configuration及继承自@Configuration注解的注解).  

例子:
1. basePackages属性使用
```java
@Configuration
// 表示扫描com.nichijou包下的所有组件
@ComponentScan("com.nichijou")
public class MyScan {
}
```
2. basePackageClasses属性
```java
@Configuration
// 表示仅添加AA和BB类
@ComponentScan(basePackageClasses = {AA.class, BB.class})
public class MyScan {
}
```
3. includeFilters
```java
```
4. excludeFilters
```java
```

ComponentScan注解定义:
```java
public @interface ComponentScan {

    // 全限定包名, 将会扫描包下的所有组件
	@AliasFor("basePackages")
	String[] value() default {};

	@AliasFor("value")
	String[] basePackages() default {};

    // 全限定类名, 只扫描指定的类
	Class<?>[] basePackageClasses() default {};

	Class<? extends BeanNameGenerator> nameGenerator() default BeanNameGenerator.class;

	Class<? extends ScopeMetadataResolver> scopeResolver() default AnnotationScopeMetadataResolver.class;

	ScopedProxyMode scopedProxy() default ScopedProxyMode.DEFAULT;

	String resourcePattern() default ClassPathScanningCandidateComponentProvider.DEFAULT_RESOURCE_PATTERN;

	boolean useDefaultFilters() default true;

    // 包含过滤规则, 根据该规则查找需要注入的组件
	Filter[] includeFilters() default {};

    // 排除过滤规则, 根据该规则查找需要排除的组件
	Filter[] excludeFilters() default {};


	boolean lazyInit() default false;

	@Retention(RetentionPolicy.RUNTIME)
	@Target({})
	@interface Filter {

        // 默认是以Annotation规则排除
		FilterType type() default FilterType.ANNOTATION;

		@AliasFor("classes")
		Class<?>[] value() default {};

		@AliasFor("value")
		Class<?>[] classes() default {};

		String[] pattern() default {};
	}
```


### @Bean
> 作用于方法上, 表示方法产生一个Spring管理的组件.

常用属性:
1. 指定bean名称
```java
@Configuration
public class MyBean {
    // 默认使用方法名称作为组件名称, 即car
    @Bean
    public Car car() {
        return new Car();
    }

    // 通过name或value指定bean名称 
    // @Bean(name = "myCar")
    @Bean("myCar")
    public Car getCar() {
        return new Car();
    }
}
```
2. 指定bean初始化和销毁方法
```java
// 指定Car()中init和destroy方法作为初始化和销毁方法
@Bean(initMethod="init", destoryMethod()="destory")
public Car car() {
    return new Car();
}

```

### @Component
> 表示当前类是Spring的一个组件
### @Service
> 表示当前类是Service层

### @Controller
> 表示当前类是Controller层

### @Repository
> 表示当前类是Dao层

### @Conditional
> 表示仅在满足条件的情况下才注册组件. 可以作用于方法和类型(类, 接口, 枚举). 在spring boot底层中大量使用.

常用实例:
```java

```



### @Primary
### @Lazy
### @Scope
### @Import

## 组件赋值
### @Value
### @Autowired
### @PropertySource
### @PropertySources
### @Profile

## 组件注入
### 构造器
### 方法
### 方法参数
### 各种Aware接口











